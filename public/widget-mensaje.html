<div id="widget-mensaje" >
<div class="form-group">
 <label class="control-label col-sm-2" for="agregar-texto">Texto:</label>
 <div class="col-sm-10">
 <input type="text" class="form-control" name="agregar-texto"
 placeholder="Introduce un texto" id="agregar-texto" />
 </div>
 </div>

 <div class="col-sm-offset-2 col-sm-10">
 <button type="button" class="btn btn-primary" id="boton-agregar"
 onclick="agregarMensaje()">Enviar</button>
 </div>
</div>

<script>
function agregarMensaje( ) {
window.history.pushState("", "", "/cliente.html?w=mensaje");
 $.ajax({
 url: URLbase + "/mensaje",//Â¿como se pasa aqui el email del usuario que se ha clicado?
 type: "POST",
 data: {
 texto : $("#agregar-texto").val(),
 },
 dataType: 'json',
 headers: { "token": token },
 success: function(respuesta) {
 console.log(respuesta);
 $("#contenedor-principal")
	.prepend(
			"<p>Mensaje enviado correctamente</p>");

 },
 error : function (error){
 $( "#contenedor-principal" ).load("widget-login.html");
 }
 });
}
</script>